<tool id="topX" name="topX">
    <description>topX</description>
    <requirements>
	    <container type="docker">repbioinfo/desc.2018.01</container>
    </requirements>
    <command>
 <![CDATA[

      ###COMMAND EXAMPLE: Rscript /bin/top.R annotated_Buettner csv , FALSE 10000 expression
        cp $annotated_matrix /data/annotated.csv ;

        ####Rscript  /bin/top.R  annotated  $Format $Separator $logged $threshold $type  &&
		    Rscript  /bin/top.R  annotated  $Format $Separator $logged $threshold $type  &&

	cp /data/*_gene_expression_distribution.pdf $gene_pdf &&
	cp /data/filtered_* $filtered_csv 




  
]]> </command>
    <inputs>
	<param format="csv,txt" name="annotated_matrix" label="input tabular file" type="data" />
	<param name="Format" type="select" help="matrix format" >
		<option value="csv" selected="True">csv</option>
		<option value="txt" >txt</option>
	</param>
	<param name="Separator" type="select" help="separator used in count file" >
		<option value="," selected="True">comma-separated</option>
		<option value="tab" >tab-separated</option>
	</param>
	<param name="logged" type="select">
		<option value="FALSE" selected="true">FALSE</option>
		<option value="TRUE" >TRUE</option> 
	</param>
	<param name="threshold" value="10000" type="integer"/>
	<param name="type" type="select">
		<option value="variance">variance</option>
		<option value="expression" selected="true">expression</option> 
	</param>
    </inputs>
    <outputs>
        <data name="gene_pdf" format="pdf" label="${tool.name} on ${on_string}:pdf file"/>
        <data name="log" format="txt" label="${tool.name} on ${on_string}:log"/>
        <data name="filtered_csv" format="csv" label="${tool.name} on csv file"/>
    </outputs>
    <stdio>
    <regex match="Error"
           source="both"
           level="log"
           description="Unknown error encountered" />
    </stdio>
    <help>
    </help>
</tool>


